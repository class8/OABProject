<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oab.admin.notice.dao.NoticeDao">


	<!-- 공지사항 기본 조회 -->
	<select id="noticeList" parameterType="notice"
		resultType="notice">
		select
		nt_number, nt_title,
		nt_writer, nt_content,
		to_char(nt_regdate,
		'YYYY-MM-DD') as nt_regdate, nt_readcnt
		from
		notice_tbl order by
		nt_number desc
	</select>

	<!-- 상세 페이지를 위한 게시물 조회 -->
	<select id="noticeDetail" parameterType="int"
		resultType="notice">
		select
		nt_number, nt_title,
		nt_writer, nt_content,
		to_char(nt_regdate,
		'YYYY-MM-DD') as nt_regdate, nt_readcnt
		from
		notice_tbl where nt_number = #{nt_number}
	</select>

	<!-- 게시물 등록 -->
	<insert id="noticeInsert" parameterType="notice">
		<selectKey keyProperty="nt_number" resultType="int"
			order="BEFORE">
			select notice_tbl_seq.nextval from dual
		</selectKey>
		insert into notice_tbl(nt_number, nt_title, nt_writer, nt_content)
		values( #{nt_title}, #{nt_writer}, #{nt_content})
	</insert>

	<!-- 게시물 수정 -->
	<update id="noticeUpdate" parameterType="notice">
		update notice_tbl
		set
		nt_title = #{nt_title}
		, nt_content = #{nt_content}
		, nt_regdate =
		sysdate
		where nt_number = #{nt_number}
	</update>

	<!-- 게시물 삭제 -->
	<delete id="noticeDelete" parameterType="notice">
		delete from notice_tbl where nt_number = #{nt_number}
	</delete>


</mapper>